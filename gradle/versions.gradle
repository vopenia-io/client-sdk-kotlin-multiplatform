/* * * * * * * * * * * * * * * * *
 * Default project info
 * * * * * * * * * * * * * * * * */

def parentDir = file(buildscript.sourceFile).getParentFile().getAbsolutePath()
def versionProps = new Properties()
new File(parentDir, "../version.properties").withInputStream { versionProps.load(it) }

def defaultVersion = versionProps.getProperty("version")

def propSuffix = { prefix, suffixKeyName ->
    return rootProject.properties.containsKey(suffixKeyName)
            ? "${prefix}-${rootProject.properties[suffixKeyName]}" : prefix
}

ext {
    namespace = "com.vopenia.sdk"
    javaVersion = "17"
    javaVersionObject = JavaVersion.VERSION_17

    prop = { name, defValue ->
        return rootProject.properties.containsKey(name)
                ? rootProject.properties[name] : defValue
    }

    pomDescription = "Vopenia"
    pomInceptionYear = "${new Date().format("YYYY")}"
    pomUrl = "https://github.com/vopenia/"
    pomLicenseName = 'Vopenia'
    pomLicenseUrl = 'https://github.com/vopenia'

    pomDeveloperId = 'codlab'
    pomDeveloperName = 'Kevin Le Perf'
    pomDeveloperEmail = 'codlabtech@gmail.com'

    pomScmConnection = 'scm:git:github.com/vopenia/client-sdk-kotlin-multiplatform.git'
    pomScmDeveloperConnection = 'scm:git:ssh://github.com/nonopn/client-sdk-kotlin-multiplatform.git'
    pomScmUrl = 'https://github.com/nonopn/client-sdk-kotlin-multiplatform/tree'

    signingKeyId = prop("signing.keyId", null)

    groupId = prop("GROUP_ID", "com.vopenia")
    originalVersion = defaultVersion
    version = propSuffix(defaultVersion, "SUFFIX")

    projectVersionCode = 1

    ndkVersion = "25.1.8937393"

    testConfigliveKitUrl = prop("TEST_CONFIG_LIVEKIT_URL", "")
    testConfigliveKitApiKey = prop("TEST_CONFIG_LIVEKIT_API_KEY", "")
    testConfigliveKitApiSecret = prop("TEST_CONFIG_LIVEKIT_API_SECRET", "")

    sampleAppNamespace = "com.vopenia.app"
    sampleAppTokenEndpoint = prop("VOPENIA_SAMPLE_APP_TOKEN_ENDPOINT", "")

    storeFile = prop("VOPENIA_STORE_FILE", "")
    storePassword = prop("VOPENIA_STORE_PASSWORD", "")
    keyAlias = prop("VOPENIA_KEY_ALIAS", "")
    keyPassword = prop("VOPENIA_KEY_PASSWORD", "")
    appDistributionId = prop("VOPENIA_APP_DISTRIBUTION_APP_ID", "")
}
